# System Diagram for ```chillingsworth/stripe-commission-deduction-api```
## Created/Edited with https://textik.com/

                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                              
                   +-----------------------------+                                                                                                                                                                                                                            
                   |                             |         +------------------------------------------+                                                                                                                                                                       
                   |  Restaurant Patron Order    |         |    Client's Restaurant Website           |                                                                                                                                                                       
                   |                             |         |                                          |                                                                                                                                                                       
                   +----------------------|------+         |  +----------------------------------+    |                                                                                                                                                                       
                                          |                |  |      GloriaFoods Plugin          |    |                                                                                                                                                                       
                                          |                |  |                                  |    |                                                                                                                                                                       
                                          |                |  |   +-------------------------+    |    |                                                                                                                                                                       
                                          +-----------------------> Customer Order Webhook  -------------------------------------------+                                                                                                                                      
                                                           |  |   +-------------------------+    |    |                                |                                                                                                                                      
                                                           |  |                                  |    |                                |                                                                                                                                      
                                                           |  +----------------------------------+    |                                |                                                                                                                                      
                                                           |                                          |                                |                                                                                                                                      
                                                           +------------------------------------------+                                |                                                                                                                                      
                                                                                                               +-----------------------v----------------------+                                                                                                               
                                                                                                               |                                              |                                                                                                               
                                                                                                               |              Your Stripe A count             |                                                                                                               
                                                                                                               |                                              |                                                                                                               
                                                                                                               |     +----------------------------------+     |                                                                                                               
                                                                                                               |     |                                  |     |                                                                                                               
                                                                                                               |     |    paymentintent.succeeded       |     |                                                                                                               
                  +---------------------------------------------------------+                                  |     |                                  |     |                                                                                                               
                  |                                                         |                                  |     +--------|----------------|--------+     |                                                                                                               
                  |                    Amazon Web Services                  |                                  |              |                |              |                                                                                                               
                  |                                                         |                                  |              |                |              |                                                                                                               
                  |                                                         |      paymentintent.succeeded     | +------------v-----------+    |              |                                                                                                               
                  |   +--------------------------------------------------+  |   +--------------------------------- Funds Recieved Webhook |    |              |                                                                                                               
                  |   |                                                  |  |   |                              | +------------------------+    |              |                                                                                                               
                  |   |  chillingsworth/stripe-commission-deduction-api  |  |   |                              |                               |              |                                                                                                               
                  |   |                                                  |  |   |                              |                               |              |                                                                                                               
                  |   |                                                  |  |   |                              |    +--------------------------v--------+     |                                                                                                               
                  |   |   +-------------------------------------------+  |  |   |                              |    |          Your Stripe Funds        |     |                                                                                                               
                  |   |   |                                           <----------                              |    +--------------------------|--------+     |                                                                                                               
                  |   |   |         ./lambda/hook/index.py            |  |  |                                  |                               |              |                                                                                                               
                  |   |   |                                           ----------+                              +-------------------------------|--------------+                                                                                                               
                  |   |   +---------------------|---------------------+  |  |   |                                                              |                                                                                                                              
                  |   |                         |                        |  |   |                                                              |                                                                                                                              
                  |   |                         |                        |  |   |  stripe.Transfer.create      +-----------------------------------------+                                                                                                                    
                  |   |   +---------------------v---------------------+  |  |   ------------------------------->                Stripe API               |                                                                                                                    
                  |   |   |                                           |  |  |                                  +-----------------------------------------|                                                                                                                    
                  |   |   |          AWS RDS MySQL Database           |  |  |                                                                            |                                                                                                                    
                  |   |   |                                           |  |  |                                                                            |                                                                                                                    
                  |   |   +-------------------------------------------+  |  |                                  +-----------------------------------------|---+                                                                                                                
                  |   |                                                  |  |                                  |      Client's Stripe Connect Account    |   |                                                                                                                
                  |   +--------------------------------------------------+  |                                  |                                         |   |                                                                                                                
                  |                                                         |                                  |   +-------------------------------------v   |                                                                                                                
                  +---------------------------------------------------------+                                  |   |         Their Stripe Funds          |   |                                                                                                                
                                                                                                               |   +-------------------------------------+   |                                                                                                                
                                                                                                               |                                             |                                                                                                                
                                                                                                               +---------------------------------------------+                                                                                                                
                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                             